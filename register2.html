<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Her Pair</title>
<link href="css/style.css" type="text/css" rel="stylesheet">
<script src="js/jquery.min.js"></script>
<script src="js/config.js"></script>
<script type="text/javascript"> 
  function checkDevice(){
		document.addEventListener("deviceready", onDeviceReady, false);
}
  function onDeviceReady() {
   //navigator.splashscreen.hide(); 
   return true;  
  }
</script>
<script>
jQuery(document).ready(function(){
    jQuery(".header-menu").click(function(){
        jQuery(this).toggleClass("toggled");
    });
});
</script>
</head>

<body onLoad="checkDevice();">
<div class="wrapper">
  <header>
    <div class="header-top">
      <div class="header-menu">
        <div class="menubox"><img src="images/menu.png"></div>
        <ul class="afterclieckshow">
          <li><a href="index.html">Home</a></li>
         </ul>
      </div>
      <div class="header-right"><img src="images/menu-logo.png"></div>
    </div>
  </header>
  <div class="container">
    <div class="innerpage registerpage">
      <h1 class="header-title">REGISTER</h1>
      <div class="loginmainblock registerblock">
        <ul class="tabs">
          <li class=""><a href="javascript:void(0);"><span>1</span></a></li>
          <li class="active"><a href="javascript:void(0);"><span>2</span></a></li>
        </ul>
        <input type="hidden" name="herpair" id="herpair">
        <input type="text" name="name" id="name" maxlength="30" placeholder="NAME"/>
        <input type="text" name="email" id="email" maxlength="50" placeholder="EMAIL"/>
        <input type="text" name="telephone" id="telephone" maxlength="13" placeholder="PHONE"/>
        <input type="text" name="country" id="country" maxlength="25" placeholder="COUNTRY"/>
        <input type="text" name="city" id="city" maxlength="30" placeholder="CITY"/>
        <input type="password" name="user_password" id="user_password" maxlength="10" placeholder="PASSWORD"/>
        <input type="password" name="user_con_pass" id="user_con_pass" maxlength="10" placeholder="RE ENTER PASSWORD"/>
        <div class="uploadfile"><a href="javascript:void(0);" onClick="uploadImage();">+ UPLOAD PHOTO</a></div>
        <input type="hidden" name="prof_image" id="prof_image">
        <input class="submitbtn" type="submit" onClick="registerAccount();" value="Submit"/>
      </div>
    </div>
  </div>
</div>
<div class="loadermain" id="loadingImg">
<div class="loader"></div>
</div>
</body>
 <script type="text/javascript">
 
 function callBackFunctionFlag(){
	$("#loadingImg").fadeOut();
	return true;
}

  function uploadImage() {	  
	             
           navigator.camera.getPicture(uploadPhoto, function(message) {
						
			navigator.notification.alert(
						"sorry! you have discarded image upload.",
						callBackFunctionFlag, 
						'Confirmations',
						"Ok"
					);
			
			
			
		},{
			quality: 50, 
			correctOrientation: true,
			targetWidth: 600,
            targetHeight: 600,						
			destinationType: navigator.camera.DestinationType.FILE_URI,
			sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
		}
            );
 
        }
 
        function uploadPhoto(imageURI) {
			$("#loadingImg").fadeIn();
			
			var upload_url = siteurl + '?route=account/upload';			
            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI1.substr(imageURI1.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";
 
            var params = new Object();
            params.value1 = "test";
            params.value2 = "param";
 
            options.params = params1;
            options.chunkedMode = false;
 
            var ft = new FileTransfer();
            ft.upload(imageURI, upload_url, win, fail, options);
        }
 
        function win(r){
            $("#loadingImg").fadeOut();
			var resturn_data = jQuery.parseJSON(r.response);
			
			if(resturn_data.success)
			{							
				$("#prof_image").val(resturn_data.img_name);
			}else if(resturn_data.error)
			{								
				navigator.notification.alert(
						resturn_data.error,
						callBackFunctionFlag, 
						'Confirm',
						"Ok"
					);
			}
            
        }
 
        function fail(error) {
           $("#loadingImg").fadeOut();
			navigator.notification.alert(
						"An error has occurred",
						callBackFunctionFlag, 
						'Confirm',
						"Ok"
					);
        }
 </script>
<script type="text/javascript">
$(document).ready(function(e) {
    
	$('#herpair').val(gup("herpair"));
});
function registerAccount(){
	var url = siteurl + '?route=account/register';	
	jQuery.ajax({
			 type: 'POST',
			 url: url,
			 data: $('.registerblock input[type=\'text\'], .registerblock input[type=\'hidden\'], .registerblock input[type=\'password\']'),
			 dataType: 'json',
			 crossDomain: true,
			 success: function(data){
				$('.registerblock input[type="text"], .registerblock input[type="password"]').removeClass('error'); 
				 
				 if(data['error'])
				 {									
					navigator.notification.alert(
						data['error']['text'],
						callBackFunctionFlag, 
						'Confirm',
						"OK"
					);
						 
				 }else if(data['success'])
				 {
					localStorage.setItem("herpair_log_id", data['success']['customer_id']);					
					window.location = './index.html';
				 }
			}
   		});	
	
}
</script>
</html>
